---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "illumio-core_virtual_service Resource - terraform-provider-illumio-core"
subcategory: ""
description: |-
  Manages Illumio Virtual Service
---

# illumio-core_virtual_service (Resource)

Manages Illumio Virtual Service

## Example Usage

```terraform
resource "illumio-core_label" "role_db" {
  key   = "role"
  value = "R-DB"
}

resource "illumio-core_label" "app_crm" {
  key   = "app"
  value = "A-CRM"
}

resource "illumio-core_label" "env_qa" {
  key   = "env"
  value = "E-QA"
}

resource "illumio-core_label" "loc_au" {
  key   = "loc"
  value = "L-AU"
}

resource "illumio-core_service" "mysql" {
  name        = "S-MYSQL"
  description = "TCP and UDP Remote Desktop Protocol ports"

  service_ports {
    # Illumio uses the IANA protocol numbers to identify the service proto
    proto = "6"  # TCP
    port  = "3389"
  }
}

resource "illumio-core_virtual_service" "example" {
  name        = "VS-CRM-DB"
  description = "CRM Application database virtual service"
  apply_to    = "host_only"

  service {
    href = illumio-core_service.mysql.href
  }

  labels {
    href = illumio-core_label.role_db.href
  }

  labels {
    href = illumio-core_label.app_crm.href
  }

  labels {
    href = illumio-core_label.env_qa.href
  }

  labels {
    href = illumio-core_label.loc_au.href
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `apply_to` (String) Name of the virtual service. Allowed values are "host_only" and "internal_bridge_network"
- `name` (String) Name of the virtual service. The name should be between 1 to 255 characters

### Optional

- `description` (String) The long description of the virtual service
- `external_data_reference` (String) A unique identifier within the external data source
- `external_data_set` (String) The data source from which a resource originates
- `ip_overrides` (Set of String) Array of IPs or CIDRs as IP overrides
- `labels` (Block Set) Contained labels (see [below for nested schema](#nestedblock--labels))
- `service` (Block List, Max: 1) Associated service (see [below for nested schema](#nestedblock--service))
- `service_addresses` (Block Set) List of service address. Specify one of the combination {fqdn, description, port}, {ip, network} or {ip, port} (see [below for nested schema](#nestedblock--service_addresses))
- `service_ports` (Block Set) URI of associated service (see [below for nested schema](#nestedblock--service_ports))

### Read-Only

- `caps` (List of String) User permissions for the object
- `created_at` (String) Timestamp when this virtual service was first created
- `created_by` (Map of String) User who created this virtual service
- `deleted_at` (String) Timestamp when this virtual service was last deleted
- `deleted_by` (Map of String) User who deleted this virtual service
- `href` (String) URI of Virtual Service
- `id` (String) The ID of this resource
- `pce_fqdn` (String) PCE FQDN for this container cluster. Used in Supercluster only
- `update_type` (String) Update type
- `updated_at` (String) Timestamp when this virtual service was last updated
- `updated_by` (Map of String) User who last updated this virtual service

<a id="nestedblock--labels"></a>
### Nested Schema for `labels`

Required:

- `href` (String) URI of label

Read-Only:

- `key` (String) Key in key-value pair
- `value` (String) Value in key-value pair


<a id="nestedblock--service"></a>
### Nested Schema for `service`

Required:

- `href` (String) URI of associated service


<a id="nestedblock--service_addresses"></a>
### Nested Schema for `service_addresses`

Optional:

- `description` (String) Description for given fqdn
- `fqdn` (String) FQDN to assign to the virtual service.  Allowed formats: hostname, IP, or URI
- `ip` (String) IP address to assign to the virtual service
- `network` (Block Set, Max: 1) Network URI for this IP address (see [below for nested schema](#nestedblock--service_addresses--network))
- `port` (String) Port Number. Also, the starting port when specifying a range. Allowed range is -1 - 65535

<a id="nestedblock--service_addresses--network"></a>
### Nested Schema for `service_addresses.network`

Required:

- `href` (String) URI of associated service



<a id="nestedblock--service_ports"></a>
### Nested Schema for `service_ports`

Required:

- `proto` (String) Transport protocol. Allowed values are 6 (TCP) and 17 (UDP)

Optional:

- `port` (String) Port Number. Also, the starting port when specifying a range. Allowed range is -1 - 65535
- `to_port` (String) High end of port range inclusive if specifying a range. Allowed range is 0 - 65535

## Import

Import is supported using the following syntax:

```shell
# Virtual Service objects can be imported from the Illumio PCE.
# The imported ID must match the HREF of the remote object.

terraform import illumio-core_virtual_service.example "/orgs/1/sec_policy/draft/virtual_services/aabbccdd-eeff-0011-2233-445566778899"
```
